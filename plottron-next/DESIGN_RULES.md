# デザイン保全ルール（Plottron Next）

本ドキュメントは、本プロジェクトの「現在のデザインを崩さない」ための運用ルールです。すべてのUI変更・実装は以下を満たすこと。

## 1. 目的と適用範囲
- 本番およびプレビュー環境での見た目・動作の一貫性維持
- `plottron-next/` 配下のUI（`app/`, `components/`, `styles/`, `public/`）に適用

## 2. UI変更の基本方針（必須）
- 既存のレイアウト構造（`app/layout.tsx` と `app/page.tsx`）を壊さない
- 既存のフォント構成（Geist, Bungee, Anton, Chewy）を変更しない
- 既存カラーとスペーシングスケールを優先。独自値は極力追加しない
- 新規UIは再利用可能なコンポーネントとして `components/` に実装
- 既存CSSの上書きではなく、まずはTailwindユーティリティで対応

## 3. タイポグラフィ / カラー
- フォント：`app/layout.tsx` で設定されたファミリー・変数を変更しない
- 色：Tailwindの色ユーティリティか既存CSS変数のみ使用（直値の16進・rgbaは避ける）
- コントラスト：WCAG AA相当を確保（小テキスト 4.5:1 以上）

## 4. レイアウト / スペーシング / 層（z-index）
- スペーシング：Tailwindのスケール（例: `p-4`, `gap-6`）のみ使用
- コンテナ幅：既存の幅・余白ユーティリティを踏襲（`max-w-*`, `mx-auto`）
- z-indexガイドライン：
  - 背景（装飾/キャンバス）：-1 〜 0
  - ベースコンテンツ：0 〜 10
  - 固定ヘッダー/ナビ：20
  - モーダル/オーバーレイ：50 以上

## 5. コンポーネント指針
- 公開API（props）を明確化し、命名は意味的で一貫性を持たせる
- 視覚表現の責務はコンポーネント内に閉じる（ページでの局所CSSは避ける）
- クラスの合成は `className` で行い、インラインスタイルは原則禁止（動的計算のみ可）

## 6. Tailwind運用
- ユーティリティを優先。カスタムCSSは `styles/` に限定して最小限
- レスポンシブはモバイルファースト（`sm:`, `md:`, `lg:` の順で上書き）
- 余白・サイズ・色は既存スケールを使用。任意値（`[12px]` など）は要レビュー

## 7. 画像 / アセット
- 画像は `public/` 配下へ配置し、相対パスで参照
- 形式は用途に応じて最適化（写真: jpg/webp、透過: png、ベクタ: svg）
- サイズ最適化（必要十分な解像度、無圧縮の巨大画像禁止）

## 8. レスポンシブ / ブレークポイント
- 基本ブレークポイント：`sm (640px)`, `md (768px)`, `lg (1024px)`, `xl (1280px)`
- 各ブレークポイントで配置崩れ・はみ出しがないことを確認

## 9. モーション / パフォーマンス
- アニメーションはCSS（GPUフレンドリー）を優先、JSアニメは最小限
- 60fps を目標。重い処理はスロットリング/`requestAnimationFrame` で制御
- スクロール/リサイズのイベントリスナはクリーンアップ必須

## 10. アクセシビリティ
- 画像には代替テキスト（`alt`）必須
- インタラクティブ要素はキーボード操作可能（`tabIndex`, `role` 適切化）
- フォーカスリングは視認可能に維持（`focus:*` を除去しない）

## 11. 禁止事項（要申請）
- グローバルスタイル（`globals.css`）の破壊的変更
- フォントファミリー/サイズ体系・カラー体系の変更
- 任意のpx指定の多用、ネガティブマージンの乱用
- インラインスタイルでの恒久的デザイン指定
- 画像の直貼りURL（`public/` 外参照）

## 12. 命名規約 / ファイル構成
- コンポーネント：`PascalCase` + 役割が分かる命名（例: `StoryDetailModal.tsx`）
- スタイル：コンポーネント単位で分離、スコープを限定
- データ/定数：`data/` に配置し、UIと分離

## 13. 変更フロー
1) デザイン影響の有無を記述してPR作成（スクショ Before/After 必須）
2) Vercel Preview で各ブレークポイントを確認
3) レビューチェック完了後にマージ

## 14. レビュー前チェックリスト
- [ ] 既存フォント/色/余白スケールのみ使用
- [ ] 主要3解像度（モバイル/タブレット/デスクトップ）で崩れなし
- [ ] コントラスト AA 以上、フォーカス可視
- [ ] 画像最適化済み、`public/` 配下使用
- [ ] インラインスタイルなし（やむを得ず使用時は理由を記載）
- [ ] 不要CSS/クラスの削除、バンドル肥大を招く変更なし
- [ ] Vercel Preview で最終確認済み

---
本ルールに反する変更はデザイン破綻の原因となるため、PRレビューで差し戻す場合があります。必要があれば、ルール改訂の提案を行ってください。
